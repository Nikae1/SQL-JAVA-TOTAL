----DEV 생성 
CREATE USER "POSJYJ" IDENTIFIED BY "3135"
DEFAULT TABLESPACE USERS
QUOTA UNLIMITED ON USERS;

GRANT CREATE SESSION, RESOURCE TO POSJYJ;

CREATE USER "POSKJS" IDENTIFIED BY "9712"
DEFAULT TABLESPACE USERS
QUOTA UNLIMITED ON USERS;

GRANT CREATE SESSION, RESOURCE TO POSKJS;

CREATE USER "POSPCR" IDENTIFIED BY "4171"
DEFAULT TABLESPACE USERS
QUOTA UNLIMITED ON USERS;

GRANT CREATE SESSION, RESOURCE TO POSPCR;

CREATE USER "POSKJW" IDENTIFIED BY "1452"
DEFAULT TABLESPACE USERS
QUOTA UNLIMITED ON USERS;

GRANT CREATE SESSION, RESOURCE TO POSKJW;
--계정생성 및 접속권한 부여

--TABLE CREATE (CATEGORIES) 생성
CREATE TABLE POSDBA.CATEGORIES(
CG_CODE NVARCHAR2(2), -- 분류코드 
CG_NAME NVARCHAR2(2) -- 분류명 
)TABLESPACE USERS;

-- CATEGORIES 동의어 
CREATE PUBLIC SYNONYM CG FOR POSDBA.CATEGORIES;

-- CATEGORIES 제약조건 
ALTER TABLE POSDBA.CATEGORIES
ADD CONSTRAINT CG_CODE_PK PRIMARY KEY(CG_CODE)
MODIFY CG_NAME NOT NULL;

-- CATEGORIES 권한부여
GRANT ALTER ANY TABLE TO POSPCR;
GRANT SELECT,INSERT ON POSDBA.CATEGORIES TO POSPCR;

GRANT ALTER ANY TABLE TO POSKJW;
GRANT SELECT, INSERT ON POSDBA.CATEGORIES TO POSKJW;

--CATEGORIES INSERT
INSERT INTO CG(CG_CODE, CG_NAME)
VALUES('20', '신상');
INSERT INTO CG(CG_CODE, CG_NAME)
VALUES('21', '품절');
INSERT INTO CG(CG_CODE, CG_NAME)
VALUES('22', '폐기');
INSERT INTO CG(CG_CODE, CG_NAME)
VALUES('23', '단종');
INSERT INTO CG(CG_CODE, CG_NAME)
VALUES('01', '고기');
INSERT INTO CG(CG_CODE, CG_NAME)
VALUES('02', '생선');
INSERT INTO CG(CG_CODE, CG_NAME)
VALUES('03', '과일');
INSERT INTO CG(CG_CODE, CG_NAME)
VALUES('04', '채소');
INSERT INTO CG(CG_CODE, CG_NAME)
VALUES('05', '문구');
INSERT INTO CG(CG_CODE, CG_NAME)
VALUES('Y1','주문 전');
INSERT INTO CG(CG_CODE, CG_NAME)
VALUES('Y2','주문 중');
INSERT INTO CG(CG_CODE, CG_NAME)
VALUES('Y3','주문 완료');
COMMIT;

SELECT*FROM CG;

-- CREATE PRODUCTS
-- PRODUCTS 생성 
CREATE TABLE POSDBA.PRODUCTS(
PR_CODE NVARCHAR2(5),
PR_NAME NVARCHAR2(2))
TABLESPACE USERS;

-- PRODUCTS 정의어 
CREATE PUBLIC SYNONYM PR FOR POSDBA.PRODUCTS;

-- PRODUCTS 제약조건 
ALTER TABLE POSDBA.PRODUCTS
ADD CONSTRAINT PR_PROCODE_PK PRIMARY KEY(PR_PROCODE)
MODIFY PR_NAME NOT NULL;

-- PRODUCTS 테이블 권한부여
GRANT ALTER ANY TABLE TO POSPCR;
GRANT SELECT,INSERT ON POSDBA.PRODUCTS TO POSPCR;

-- INSERT PRODUCTS
INSERT INTO PR(PR_CODE, PR_NAME)
VALUES('10131', '돼지고기');
INSERT INTO PR(PR_CODE, PR_NAME)
VALUES('10132', '소고기');
INSERT INTO PR(PR_CODE, PR_NAME)
VALUES('10133', '닭고기');
INSERT INTO PR(PR_CODE, PR_NAME)
VALUES('10134', '양고기');
INSERT INTO PR(PR_CODE, PR_NAME)
VALUES('10135', '오리고기');
INSERT INTO PR(PR_CODE, PR_NAME)
VALUES('10136', '고등어');
INSERT INTO PR(PR_CODE, PR_NAME)
VALUES('10137', '갈치');
INSERT INTO PR(PR_CODE, PR_NAME)
VALUES('10138', '꽁치');
INSERT INTO PR(PR_CODE, PR_NAME)
VALUES('10139', '참치');
INSERT INTO PR(PR_CODE, PR_NAME)
VALUES('10140', '연어');
INSERT INTO PR(PR_CODE, PR_NAME)
VALUES('10141', '수박');
INSERT INTO PR(PR_CODE, PR_NAME)
VALUES('10142', '사과');
INSERT INTO PR(PR_CODE, PR_NAME)
VALUES('10143', '포도');
INSERT INTO PR(PR_CODE, PR_NAME)
VALUES('10144', '바나나');
INSERT INTO PR(PR_CODE, PR_NAME)
VALUES('10145', '딸기');
INSERT INTO PR(PR_CODE, PR_NAME)
VALUES('10146', '토마토');
INSERT INTO PR(PR_CODE, PR_NAME)
VALUES('10147', '가지');
INSERT INTO PR(PR_CODE, PR_NAME)
VALUES('10148', '양파');
INSERT INTO PR(PR_CODE, PR_NAME)
VALUES('10149', '파');
INSERT INTO PR(PR_CODE, PR_NAME)
VALUES('10150', '감자');
INSERT INTO PR(PR_CODE, PR_NAME)
VALUES('10151', '연필');
INSERT INTO PR(PR_CODE, PR_NAME)
VALUES('10152', '샤프');
INSERT INTO PR(PR_CODE, PR_NAME)
VALUES('10153', '공책');
INSERT INTO PR(PR_CODE, PR_NAME)
VALUES('10154', '지우개');
INSERT INTO PR(PR_CODE, PR_NAME)
VALUES('10155', '볼펜');
COMMIT;

-- CUSTOMERS 생성
CREATE TABLE POSDBA.CUSTOMERS(
CM_MEMBERCODE NVARCHAR2(4),  -- 고객코드
CM_MEMBERNAME NVARCHAR2(5),  -- 고객명
CM_MEMBERPHONE NVARCHAR2(11) -- 고객전화번호
) TABLESPACE USERS;

-- CUSTOMERS 동의어 
CREATE PUBLIC SYNONYM MM FOR POSDBA.CUSTOMERS;

-- CUSTOMER 제약조건
ALTER TABLE POSDBA.CUSTOMERS
ADD CONSTRAINT CM_MEMBERCODE_PK PRIMARY KEY(CM_MEMBERCODE)
MODIFY CM_MEMBERNAME NOT NULL
MODIFY CM_MEMBERPHONE DEFAULT NULL NOT NULL;

-- CUSTOMER 권한부여
GRANT ALTER ANY TABLE TO POSJYJ;
GRANT SELECT,INSERT ON POSDBA.CUSTOMERS TO POSJYJ;

---INSERT CUSTOMERS
INSERT INTO MM(CM_MEMBERCODE, CM_MEMBERNAME, CM_MEMBERPHONE)
VALUES('60', '박초롱', '01011111111');
INSERT INTO MM(CM_MEMBERCODE, CM_MEMBERNAME, CM_MEMBERPHONE)
VALUES('61', '김지웅', '01011111111');
INSERT INTO MM(CM_MEMBERCODE, CM_MEMBERNAME, CM_MEMBERPHONE)
VALUES('62', '김준석', '01011111111');
INSERT INTO MM(CM_MEMBERCODE, CM_MEMBERNAME, CM_MEMBERPHONE)
VALUES('63', '정영준', '01011111111');
INSERT INTO MM(CM_MEMBERCODE, CM_MEMBERNAME, CM_MEMBERPHONE)
VALUES('64', '윤지수', '01011111111');
INSERT INTO MM(CM_MEMBERCODE, CM_MEMBERNAME, CM_MEMBERPHONE)
VALUES('65', '황영현', '01011111111');
INSERT INTO MM(CM_MEMBERCODE, CM_MEMBERNAME, CM_MEMBERPHONE)
VALUES('66', '주성현', '01011111111');
INSERT INTO MM(CM_MEMBERCODE, CM_MEMBERNAME, CM_MEMBERPHONE)
VALUES('67', '이상훈', '01011111111');
INSERT INTO MM(CM_MEMBERCODE, CM_MEMBERNAME, CM_MEMBERPHONE)
VALUES('68', '홍준택', '01011111111');
INSERT INTO MM(CM_MEMBERCODE, CM_MEMBERNAME, CM_MEMBERPHONE)
VALUES('69', '김하늘', '01011111111');
INSERT INTO MM(CM_MEMBERCODE, CM_MEMBERNAME, CM_MEMBERPHONE)
VALUES('70', '이예림', '01011111111');
INSERT INTO MM(CM_MEMBERCODE, CM_MEMBERNAME, CM_MEMBERPHONE)
VALUES('71', '황영호', '01011111111');
INSERT INTO MM(CM_MEMBERCODE, CM_MEMBERNAME, CM_MEMBERPHONE)
VALUES('72', '박건호', '01011111111');
INSERT INTO MM(CM_MEMBERCODE, CM_MEMBERNAME, CM_MEMBERPHONE)
VALUES('73', '염은진', '01011111111');
INSERT INTO MM(CM_MEMBERCODE, CM_MEMBERNAME, CM_MEMBERPHONE)
VALUES('74', '임창용', '01011111111');
INSERT INTO MM(CM_MEMBERCODE, CM_MEMBERNAME, CM_MEMBERPHONE)
VALUES('75', '김민규', '01011111111');
INSERT INTO MM(CM_MEMBERCODE, CM_MEMBERNAME, CM_MEMBERPHONE)
VALUES('76', '송은혜', '01011111111');
INSERT INTO MM(CM_MEMBERCODE, CM_MEMBERNAME, CM_MEMBERPHONE)
VALUES('77', '이정한', '01011111111');
INSERT INTO MM(CM_MEMBERCODE, CM_MEMBERNAME, CM_MEMBERPHONE)
VALUES('78', '김호원', '01011111111');
INSERT INTO MM(CM_MEMBERCODE, CM_MEMBERNAME, CM_MEMBERPHONE)
VALUES('79', '정현우', '01011111111');
INSERT INTO MM(CM_MEMBERCODE, CM_MEMBERNAME, CM_MEMBERPHONE)
VALUES('96', '비회원', '01000000000');
INSERT INTO MM(CM_MEMBERCODE, CM_MEMBERNAME, CM_MEMBERPHONE)
VALUES('97', '비회원', '01000000000');
INSERT INTO MM(CM_MEMBERCODE, CM_MEMBERNAME, CM_MEMBERPHONE)
VALUES('98', '비회원', '01000000000');
INSERT INTO MM(CM_MEMBERCODE, CM_MEMBERNAME, CM_MEMBERPHONE)
VALUES('99', '비회원', '01000000000');
COMMIT;

---CREATE OWNERS
CREATE TABLE POSDBA.OWNERS(
OW_OWCODE NVARCHAR2(4), -- 오너코드
OW_OWNAME NVARCHAR2(5)  -- 오너이름.
)TABLESPACE USERS;

-- OWNERS 정의어
CREATE PUBLIC SYNONYM OW FOR POSDBA.OWNERS;

-- OWNERS 권한부여
GRANT ALTER ANY TABLE TO POSJYJ;
GRANT SELECT, INSERT ON POSDBA.OWNERS TO POSJYJ;
GRANT ALTER ANY TABLE TO POSKJW;
GRANT SELECT, INSERT ON POSDBA.OWNERS TO POSKJW;

-- OWNERS 제약조건 
ALTER TABLE POSDBA.OWNERS
ADD CONSTRAINT OW_OWCODE_PK PRIMARY KEY(OW_OWCODE)
MODIFY OW_OWNAME NOT NULL;

---INSERT
INSERT INTO OW(OW_OWCODE, OW_OWNAME)
VALUES('001', '박초롱'); 
INSERT INTO OW(OW_OWCODE, OW_OWNAME)
VALUES('002', '김지웅'); 
INSERT INTO OW(OW_OWCODE, OW_OWNAME)
VALUES('003', '김준석'); 
INSERT INTO OW(OW_OWCODE, OW_OWNAME)
VALUES('004', '장영준'); 
COMMIT;

---CREATE STORES
CREATE TABLE POSDBA.STORES(
SR_OWCODE NVARCHAR2(3),     -- 오너코드 FOR OWNERS
SR_CODE NVARCHAR2(10),      -- 매장코드
SR_NAME NVARCHAR2(10),      -- 매장명
SR_POSITION NVARCHAR2(50),  -- 매장위치
SR_NUMBER NVARCHAR2(11),     -- 매장전화번호
SR_SECRETCODE NVARCHAR2(20) --- 매장비밀번호
)TABLESPACE USERS;

-- STORES 정의어
CREATE PUBLIC SYNONYM SR FOR POSDBA.STORES;

-- STORES 제약조건
ALTER TABLE POSDBA.STORES
ADD CONSTRAINT SR_OWCODE_CODE_PK PRIMARY KEY(SR_OWCODE, SR_CODE)

ADD CONSTRAINT SR_OWCODE_FK FOREIGN KEY(SR_OWCODE)
REFERENCES POSDBA.OWNERS(OW_OWCODE)

MODIFY SR_NAME NOT NULL
MODIFY SR_NUMBER NOT NULL
MODIFY SR_POSITION NOT NULL;

-- STORES 권한 부여
GRANT ALTER ANY TABLE TO POSPCR;
GRANT SELECT, INSERT ON POSDBA.STORES TO POSPCR;

-- INSERT
INSERT INTO ME(ME_CMMEMBERCODE, ME_OWCODE)
VALUES('60','001');
INSERT INTO ME(ME_CMMEMBERCODE, ME_OWCODE)
VALUES('61','002');
INSERT INTO ME(ME_CMMEMBERCODE, ME_OWCODE)
VALUES('62','003');
INSERT INTO ME(ME_CMMEMBERCODE, ME_OWCODE)
VALUES('63','004');
INSERT INTO ME(ME_CMMEMBERCODE, ME_OWCODE)
VALUES('99','001');
INSERT INTO ME(ME_CMMEMBERCODE, ME_OWCODE)
 VALUES('99','002');
INSERT INTO ME(ME_CMMEMBERCODE, ME_OWCODE)
VALUES('99','003');
INSERT INTO ME(ME_CMMEMBERCODE, ME_OWCODE)
VALUES('99','004');
COMMIT;

---CREATE MEMBERS
CREATE TABLE POSDBA.MEMBERS(
ME_CMMEMBERCODE NVARCHAR2(4),     -- 고객코드
ME_OWCODE NVARCHAR2(3)      -- 오너코드
)TABLESPACE USERS;

-- MEMBERS 정의어
CREATE PUBLIC SYNONYM ME FOR POSDBA.MEMBERS;

-- MEMBERS 제약조건
ALTER TABLE POSDBA.MEMBERS
ADD CONSTRAINT ME_CMMEMBERCODE_OWCODE_PK PRIMARY KEY(ME_CMMEMBERCODE,ME_OWCODE)
ADD CONSTRAINT ME_CMMEMBERCODE_FK FOREIGN KEY(ME_CMMEMBERCODE)
REFERENCES POSDBA.CUSTOMERS(CM_MEMBERCODE)
ADD CONSTRAINT ME_OWCODE_FK FOREIGN KEY(ME_OWCODE)
REFERENCES POSDBA.OWNERS(OW_OWCODE);

--- MEMBERS 권한 부여
GRANT ALTER ANY TABLE TO POSJYJ;
GRANT SELECT, INSERT ON POSDBA.MEMBERS TO POSJYJ;

---CREATE STOREPRODUCTS
CREATE TABLE POSDBA.STOREPRODUCTS(
SP_PROCODE NVARCHAR2(5),
SP_OWOWNERCODE NVARCHAR2(3),
SP_INPRICE NUMBER(5,0),
SP_OUTPRICE NUMBER(5,0),
SP_PRCGCODE NVARCHAR2(2),
SP_PRCGNAME NVARCHAR2(2),
SP_COUNT NUMBER(3,0))
TABLESPACE USERS;

---동의어 부여
CREATE PUBLIC SYNONYM SP FOR POSDBA.STOREPRODUCTS;


---제약조건
ALTER TABLE POSDBA.STOREPRODUCTS
ADD CONSTRAINT SP_PROCODE_OWOWNERCODE_PK PRIMARY KEY(SP_PROCODE, SP_OWOWNERCODE)
ADD CONSTRAINT SP_PROCODE_FK FOREIGN KEY(SP_PROCODE) REFERENCES POSDBA.PRODUCTS(PR_CODE)
ADD CONSTRAINT SP_OWOWNERCODE_FK FOREIGN KEY(SP_OWOWNERCODE) REFERENCES POSDBA.OWNERS(OW_OWCODE)
ADD CONSTRAINT SP_PRCGCODE_FK FOREIGN KEY(SP_PRCGCODE) REFERENCES POSDBA.CATEGORIES(CG_CODE)
ADD CONSTRAINT SP_PRCGNAME_FK FOREIGN KEY(SP_PRCGNAME) REFERENCES POSDBA.CATEGORIES(CG_CODE)
MODIFY SP_INPRICE DEFAULT 0 NOT NULL
MODIFY SP_OUTPRICE DEFAULT 0 NOT NULL
MODIFY SP_COUNT DEFAULT 0 NOT NULL
MODIFY SP_PRCGCODE NOT NULL
MODIFY SP_PRCGNAME NOT NULL;

---권한부여
GRANT ALTER ANY TABLE TO POSPCR;
GRANT SELECT, INSERT ON POSDBA.STOREPRODUCTS TO POSPCR;

---INSERT
INSERT INTO SP(SP_PROCODE, SP_OWOWNERCODE, SP_INPRICE, SP_OUTPRICE,
SP_PRCGCODE, SP_PRCGNAME, SP_COUNT)
VALUES('10131', '001', DEFAULT, DEFAULT, '20', '01', DEFAULT);
INSERT INTO SP(SP_PROCODE, SP_OWOWNERCODE, SP_INPRICE, SP_OUTPRICE,
SP_PRCGCODE, SP_PRCGNAME, SP_COUNT)
VALUES('10132', '001', DEFAULT, DEFAULT, '20', '01', DEFAULT);
INSERT INTO SP(SP_PROCODE, SP_OWOWNERCODE, SP_INPRICE, SP_OUTPRICE,
SP_PRCGCODE, SP_PRCGNAME, SP_COUNT)
VALUES('10133', '001', DEFAULT, DEFAULT, '20', '01', DEFAULT);
INSERT INTO SP(SP_PROCODE, SP_OWOWNERCODE, SP_INPRICE, SP_OUTPRICE,
SP_PRCGCODE, SP_PRCGNAME, SP_COUNT)
VALUES('10134', '001', DEFAULT, DEFAULT, '20', '01', DEFAULT);
INSERT INTO SP(SP_PROCODE, SP_OWOWNERCODE, SP_INPRICE, SP_OUTPRICE,
SP_PRCGCODE, SP_PRCGNAME, SP_COUNT)
VALUES('10135', '001', DEFAULT, DEFAULT, '20', '01', DEFAULT);
INSERT INTO SP(SP_PROCODE, SP_OWOWNERCODE, SP_INPRICE, SP_OUTPRICE,
SP_PRCGCODE, SP_PRCGNAME, SP_COUNT)
VALUES('10136', '002', DEFAULT, DEFAULT, '21', '02', DEFAULT);
INSERT INTO SP(SP_PROCODE, SP_OWOWNERCODE, SP_INPRICE, SP_OUTPRICE,
SP_PRCGCODE, SP_PRCGNAME, SP_COUNT)
VALUES('10137', '002', DEFAULT, DEFAULT, '21', '02', DEFAULT);
INSERT INTO SP(SP_PROCODE, SP_OWOWNERCODE, SP_INPRICE, SP_OUTPRICE,
SP_PRCGCODE, SP_PRCGNAME, SP_COUNT)
VALUES('10138', '002', DEFAULT, DEFAULT, '23', '02', DEFAULT);
INSERT INTO SP(SP_PROCODE, SP_OWOWNERCODE, SP_INPRICE, SP_OUTPRICE,
SP_PRCGCODE, SP_PRCGNAME, SP_COUNT)
VALUES('10139', '002', DEFAULT, DEFAULT, '22', '02', DEFAULT);
INSERT INTO SP(SP_PROCODE, SP_OWOWNERCODE, SP_INPRICE, SP_OUTPRICE,
SP_PRCGCODE, SP_PRCGNAME, SP_COUNT)
VALUES('10140', '002', DEFAULT, DEFAULT, '21', '02', DEFAULT);
INSERT INTO SP(SP_PROCODE, SP_OWOWNERCODE, SP_INPRICE, SP_OUTPRICE,
SP_PRCGCODE, SP_PRCGNAME, SP_COUNT)
VALUES('10141', '002', DEFAULT, DEFAULT, '21', '03', DEFAULT);
INSERT INTO SP(SP_PROCODE, SP_OWOWNERCODE, SP_INPRICE, SP_OUTPRICE,
SP_PRCGCODE, SP_PRCGNAME, SP_COUNT)
VALUES('10142', '002', DEFAULT, DEFAULT, '21', '03', DEFAULT);
INSERT INTO SP(SP_PROCODE, SP_OWOWNERCODE, SP_INPRICE, SP_OUTPRICE,
SP_PRCGCODE, SP_PRCGNAME, SP_COUNT)
VALUES('10143', '002', DEFAULT, DEFAULT, '21', '03', DEFAULT);
INSERT INTO SP(SP_PROCODE, SP_OWOWNERCODE, SP_INPRICE, SP_OUTPRICE,
SP_PRCGCODE, SP_PRCGNAME, SP_COUNT)
VALUES('10144', '002', DEFAULT, DEFAULT, '21', '03', DEFAULT);
INSERT INTO SP(SP_PROCODE, SP_OWOWNERCODE, SP_INPRICE, SP_OUTPRICE,
SP_PRCGCODE, SP_PRCGNAME, SP_COUNT)
VALUES('10145', '002', DEFAULT, DEFAULT, '21', '03', DEFAULT);
INSERT INTO SP(SP_PROCODE, SP_OWOWNERCODE, SP_INPRICE, SP_OUTPRICE,
SP_PRCGCODE, SP_PRCGNAME, SP_COUNT)
VALUES('10146', '003', DEFAULT, DEFAULT, '21', '04', DEFAULT);
INSERT INTO SP(SP_PROCODE, SP_OWOWNERCODE, SP_INPRICE, SP_OUTPRICE,
SP_PRCGCODE, SP_PRCGNAME, SP_COUNT)
VALUES('10147', '003', DEFAULT, DEFAULT, '21', '04', DEFAULT);
INSERT INTO SP(SP_PROCODE, SP_OWOWNERCODE, SP_INPRICE, SP_OUTPRICE,
SP_PRCGCODE, SP_PRCGNAME, SP_COUNT)
VALUES('10148', '003', DEFAULT, DEFAULT, '21', '04', DEFAULT);
INSERT INTO SP(SP_PROCODE, SP_OWOWNERCODE, SP_INPRICE, SP_OUTPRICE,
SP_PRCGCODE, SP_PRCGNAME, SP_COUNT)
VALUES('10149', '003', DEFAULT, DEFAULT, '21', '04', DEFAULT);
INSERT INTO SP(SP_PROCODE, SP_OWOWNERCODE, SP_INPRICE, SP_OUTPRICE,
SP_PRCGCODE, SP_PRCGNAME, SP_COUNT)
VALUES('10150', '003', DEFAULT, DEFAULT, '21', '04', DEFAULT);
INSERT INTO SP(SP_PROCODE, SP_OWOWNERCODE, SP_INPRICE, SP_OUTPRICE,
SP_PRCGCODE, SP_PRCGNAME, SP_COUNT)
VALUES('10151', '004', DEFAULT, DEFAULT, '21', '05', DEFAULT);
INSERT INTO SP(SP_PROCODE, SP_OWOWNERCODE, SP_INPRICE, SP_OUTPRICE,
SP_PRCGCODE, SP_PRCGNAME, SP_COUNT)
VALUES('10152', '004', DEFAULT, DEFAULT, '21', '05', DEFAULT);
INSERT INTO SP(SP_PROCODE, SP_OWOWNERCODE, SP_INPRICE, SP_OUTPRICE,
SP_PRCGCODE, SP_PRCGNAME, SP_COUNT)
VALUES('10153', '004', DEFAULT, DEFAULT, '21', '05', DEFAULT);
INSERT INTO SP(SP_PROCODE, SP_OWOWNERCODE, SP_INPRICE, SP_OUTPRICE,
SP_PRCGCODE, SP_PRCGNAME, SP_COUNT)
VALUES('10154', '004', DEFAULT, DEFAULT, '21', '05', DEFAULT);
INSERT INTO SP(SP_PROCODE, SP_OWOWNERCODE, SP_INPRICE, SP_OUTPRICE,
SP_PRCGCODE, SP_PRCGNAME, SP_COUNT)
VALUES('10155', '004', DEFAULT, DEFAULT, '21', '05', DEFAULT);
COMMIT;

---CREATE ORDERS
CREATE TABLE POSDBA.ORDERS(
OR_OWCODE NVARCHAR2(3),  -- 오너코드 
OR_SRCODE NVARCHAR2(10), -- 매장코드 
OR_MECODE NVARCHAR2(4),  -- 고객코드 
OR_DATE   DATE,          -- 주문일시
OR_STATE  NCHAR(2)       -- 주문상태코드
)TABLESPACE USERS;

---동의어 부여
CREATE PUBLIC SYNONYM OS FOR POSDBA.ORDERS;

---권한 부여
GRANT CREATE ANY TABLE TO POSKJW;
GRANT ALTER ANY TABLE TO POSKJW;
GRANT SELECT, INSERT ON POSDBA.ORDERS TO POSKJW;
GRANT DELETE, UPDATE ON POSDBA.ORDERS TO POSKJW;

---제약조건
ALTER TABLE POSDBA.ORDERS  -- ★ FOREIGN KEY와 REFERENCES와 컬럼순서가 일치해야 적용 ★
ADD CONSTRAINT OR_OWCODE_SRCODE_MECODE_DATE PRIMARY KEY(OR_OWCODE,OR_SRCODE,OR_MECODE,OR_DATE)
ADD CONSTRAINT OR_OWCODE_SRCODE_FK FOREIGN KEY(OR_OWCODE, OR_SRCODE) REFERENCES POSDBA.STORES(SR_OWCODE, SR_CODE)
ADD CONSTRAINT OR_MECODE_FK FOREIGN KEY(OR_OWCODE, OR_MECODE) REFERENCES POSDBA.MEMBERS(ME_OWCODE, ME_CMMEMBERCODE )
MODIFY OR_DATE DEFAULT NULL NOT NULL
MODIFY OR_STATE DEFAULT NULL NOT NULL;

---INSERT
INSERT INTO OS(OR_OWCODE, OR_SRCODE, OR_MECODE, OR_DATE, OR_STATE)
VALUES('001', '0241164171', '60', TO_DATE('20221110120000', 'YYYYMMDDHH24MISS'), 'Y1');
INSERT INTO OS(OR_OWCODE, OR_SRCODE, OR_MECODE, OR_DATE, OR_STATE)
VALUES('002', '0241164172', '61', TO_DATE('20221110120000', 'YYYYMMDDHH24MISS'), 'Y3');
INSERT INTO OS(OR_OWCODE, OR_SRCODE, OR_MECODE, OR_DATE, OR_STATE)
VALUES('003', '0241164173', '62', TO_DATE('20221110120000', 'YYYYMMDDHH24MISS'), 'Y3');
INSERT INTO OS(OR_OWCODE, OR_SRCODE, OR_MECODE, OR_DATE, OR_STATE)
VALUES('004', '0241164174', '63', TO_DATE('20221110120000', 'YYYYMMDDHH24MISS'), 'Y1');
COMMIT;

---CREATE ORDERDETAILS
CREATE TABLE POSDBA.ORDERDETAILS(
OD_OWCODE NVARCHAR2(3),  -- 오너코드 
OD_SRCODE NVARCHAR2(10), -- 매장코드 
OD_MECODE NVARCHAR2(4),  -- 고객코드
OD_DATE   DATE,          -- 주문일시
OD_PRCODE NVARCHAR2(5),  
OD_PRCOUNT NUMBER(3,0)
)TABLESPACE USERS;

---동의어 부여
CREATE PUBLIC SYNONYM OD FOR POSDBA.ORDERDETAILS;

--권한 부여
GRANT SELECT, INSERT ON POSDBA.ORDERDETAILS TO POSKJW;

---제약조건
ALTER TABLE POSDBA.ORDERDETAILS
ADD CONSTRAINT OD_ORDERDETAILS_PK PRIMARY KEY(OD_OWCODE, OD_SRCODE, OD_MECODE, OD_DATE, OD_PRCODE)
ADD CONSTRAINT OD_ORDER_FK FOREIGN KEY(OD_OWCODE, OD_SRCODE, OD_MECODE, OD_DATE) REFERENCES POSDBA.ORDERS(OR_OWCODE, OR_SRCODE, OR_MECODE, OR_DATE)
ADD CONSTRAINT OD_OWCODE_PRCODE_FK FOREIGN KEY(OD_OWCODE, OD_PRCODE) REFERENCES POSDBA.STOREPRODUCTS(SP_OWOWNERCODE, SP_PROCODE)
MODIFY OD_PRCOUNT DEFAULT 0 NOT NULL;


----INSERT
--INSERT INTO POSDBA.ORDERDETAILS(OD_OWCODE,OD_SRCODE,OD_MECODE,OD_DATE,OD_PRCODE,OD_PRCOUNT)
--VALUES('004','0241164171','60',
--TO_DATE('20221111120000', 'YYYYMMDDHH24MISS'),'10155',DEFAULT);